## âšªä¸šåŠ¡åœºæ™¯1ï¼šå­—ä½“åŠ è½½

åœ¨ç®¡ç†åŽå°é…ç½®ä»»åŠ¡æˆ–è€…æ´»åŠ¨éœ€è¦ç”¨åˆ°å¤–éƒ¨çš„å­—ä½“åŒ…ï¼Œå‰ç«¯çš„åŠ è½½æ–¹æ¡ˆå¦‚ä¸‹
```js
Â  const initOptionList = () => {
   // è¿™é‡Œçš„initFontListä¸ºåŽç«¯ä¼ é€’æ¥çš„æ•°æ®ï¼Œä»ŽpropsæŽ¥æ”¶
Â  Â  if ( !initFontList.length ) return

Â  Â  const optionList = []

	// ç”¨æ¥æ¸²æŸ“selectï¼ˆå¿½ç•¥ï¼‰
Â  Â  initFontList.forEach( optionItem => {
Â  Â  Â  optionList.push( {
Â  Â  Â  Â  id: optionItem.id,
Â  Â  Â  Â  family:optionItem.family,
Â  Â  Â  Â  value: optionItem.link,
Â  Â  Â  Â  label: optionItem.name,
Â  Â  Â  } )

Â  Â  Â  // è½½å…¥å¤–éƒ¨å­—ä½“ï¼ˆéžå…¨é‡ç‰ˆæœ¬ï¼‰ðŸ‘‡
Â  Â  Â  const textFontFace = new FontFace( optionItem.family, `url(${optionItem.link})` )
Â  Â  Â  textFontFace.load().then( ( loadFace ) => {
Â  Â  Â  Â  document.fonts.add( loadFace );
Â  Â  Â  } );
Â  Â  } )
Â  Â  setFontOptionList( optionList )
Â  }
```
é€šè¿‡åŽç«¯ä¼ é€’çš„æ•°æ®è¿›è¡Œselectçš„æ¸²æŸ“å’Œé¢„è§ˆå­—ä½“çš„åŠ è½½ï¼Œæ­£å¸¸åŽç«¯ä¼šè¿”å›žä¸€ä¸ªå…¨é‡çš„å­—ä½“é“¾æŽ¥å’Œä¸€ä¸ªéžå…¨é‡çš„å­—ä½“é“¾æŽ¥ï¼Œéžå…¨é‡çš„å­—ä½“é“¾æŽ¥ä¸€èˆ¬åªæœ‰å­—ä½“åå­—çš„é‚£å‡ ä¸ªå­—æœ‰å¯¹åº”çš„å­—ä½“æ•ˆæžœï¼Œå…¨é‡åˆ™æ˜¯æ•´ä½“çš„å­—ä½“åŒ…ã€‚

reactä¸­å¸¸è§çš„åŠ è½½éƒ½è·ŸfontFaceæœ‰å…³ï¼Œå¦‚æžœé¡¹ç›®ä¸­éœ€è¦ç”¨çš„å­—ä½“æ˜¯å›ºå®šçš„ï¼Œå¯ä»¥æå‰ä¸‹è½½åˆ°æœ¬åœ°ç„¶åŽåœ¨cssä¸­ç”¨@font-faceåŠ è½½ï¼Œæ —å­å¦‚ä¸‹
```css
@font-face  
{  
font-family: yourFontName;  
src: url('your font local address'),  
}


div  
{  
  font-family: yourFontName;  
}
```

å¦‚æžœæ˜¯è·Ÿæˆ‘ä¸€æ ·éœ€è¦åŽç«¯è¿”å›žæ•°æ®çš„ï¼Œå°±éœ€è¦ç”¨ä¸ŠFontFaceå¯¹è±¡

[FontFace - Web API æŽ¥å£å‚è€ƒ | MDN](https://developer.mozilla.org/zh-CN/docs/Web/API/FontFace)

æ­£å¸¸å°±æŽ¥æ”¶å‰é¢ä¸¤ä¸ªå‚æ•°ç¬¬ä¸€ä¸ªæ˜¯å­—ä½“åç§°ï¼Œç¬¬äºŒä¸ªæ˜¯å­—ä½“çš„å¤–éƒ¨é“¾æŽ¥ï¼ˆéœ€è¦ç”¨ url('')åŒ…èµ·æ¥ï¼‰ï¼Œä¼ å…¥ä¹‹åŽå°±åˆ›å»ºå¥½äº†ï¼Œç„¶åŽæˆ‘ä»¬æ‰§è¡ŒFontFaceçš„ loadå‡½æ•°ï¼Œä»–æœ¬èº«æ˜¯ä¸ªpromiseï¼Œæ‰€ä»¥å¯ä»¥ç”¨thenæ¥å¤„ç†åŽç»­çš„æ“ä½œï¼Œç›´æŽ¥åœ¨thenå‡½æ•°ä¸­æ‹¿åˆ°å­—ä½“å¯¹è±¡ ä½¿ç”¨documentçš„åŽŸç”Ÿæ–¹æ³•ç›´æŽ¥æ·»åŠ å­—ä½“ï¼Œç„¶åŽåœ¨å¯¹åº”éœ€è¦åŠ è½½çš„å­—ä½“ä¸Šå†™ä¸ŠåŒåçš„fontFamilyå°±å¯ä»¥ç”Ÿæ•ˆäº†

(ç›®å‰æ¶‰åŠåˆ°çš„å­—ä½“åŒ…é‡æ¯”è¾ƒå°ï¼ŒCç«¯çš„åŠ è½½ä¸Šè¿˜æ¯”è¾ƒæ— æ„Ÿï¼Œç­‰åŽç»­å¦‚æžœéœ€è¦å¤„ç†å¤§ä½“é‡å­—ä½“çš„æ—¶å€™å†è¿›è¡Œå­—åº“åˆ†å‰²)

- [ ] [å­—åº“åˆ†å‰²æ–¹æ¡ˆ](https://juejin.cn/post/7118700280136335396)



## âšªä¸šåŠ¡åœºæ™¯2ï¼šReactä¸­çš„é¡µé¢è·³è½¬é—®é¢˜

æœ‰é‡åˆ°å¦‚ä¸‹æƒ…å†µï¼Œåœ¨h5æˆ–è€…pcé¡µé¢æœ‰ä¸ªæŒ‰é’®ï¼ŒæŒ‰é’®çš„åŠŸèƒ½æ˜¯å®ŒæˆæŸäº›æ“ä½œç„¶åŽè·³è½¬é¡µé¢æˆ–è€…ç›´æŽ¥è·³è½¬é¡µé¢ï¼ŒåŒæ—¶åœ¨é¡µé¢ä¸­æœ‰å¯¹åº”çš„è®¡æ•°æ•°å€¼ï¼Œå½“è·³è½¬é¡µé¢åŽè®¡æ•°éšä¹‹å˜åŒ–ï¼Œä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬è·³è½¬é¡µé¢ç„¶åŽè¿”å›žåŽï¼Œå¹¶*ä¸ä¼šè§¦å‘* reactçš„ç”Ÿå‘½å‘¨æœŸç„¶åŽè§¦å‘æ¸²æŸ“ï¼Œæœ‰å¦‚ä¸‹çš„ä¸´æ—¶è§£å†³æ–¹æ¡ˆ

```js

useEffect(() => {
 // ç›´æŽ¥ç›‘å¬é¡µé¢æ˜¯å¦å¯è§†ç„¶åŽè¿›è¡Œå¯¹åº”çš„æ“ä½œ
Â Â document.addEventListener('visibilitychange',Â ()Â =>Â {  
Â Â Â Â Â Â Â Â ifÂ (document.visibilityStateÂ ===Â 'visible')Â {  
Â Â Â Â Â Â Â Â Â Â //Â éœ€è¦çš„æ“ä½œ/æŽ¥å£è°ƒç”¨  
Â Â Â Â Â Â Â Â }  
Â Â Â Â Â Â });
Â Â return () => {
Â Â document.removeEventListener('visibilitychange')
Â Â }
},[])

```



